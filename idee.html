<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>💡 Idee – Projekt 5-7 Rot</title>
  <link rel="stylesheet" href="projekt.css">
</head>
<body>
  <main class="container">
    <!-- Schritt 1 -->
    <section class="card step active" id="step1">
      <h1>🛠️💻 Projektunterricht Ideenwerkzeug</h1>
      <div class="subtitle">Entwickle konkrete Ideen für dein oder euer aktuelles Projekt</div>

      <div class="progress-bar"><div class="progress-fill" style="width: 33%"></div></div>

      <h2><span class="icon">🎯</span> Schritt 1: Dein Themenfeld</h2>
      <p>Was ist das vorgegebene Oberthema für das aktuelle Projekt?</p>

      <input type="text" id="themenfeld" placeholder="z.B. Bewegung am Land, Nationalsozialismus..." maxlength="200">
      <button id="start-btn" disabled>🚀 Ideensammlung starten</button>
    </section>

    <!-- Schritt 2 -->
    <section class="card step" id="step2">
      <h1>🛠️💻 Projektunterricht Ideenwerkzeug</h1>
      <div class="progress-bar"><div class="progress-fill" style="width: 66%"></div></div>

      <h2><span class="icon">💡</span> Schritt 2: Ideensammlung</h2>
      <p><strong>Themenfeld:</strong> <span id="themenfeld-display"></span></p>

      <div class="timer" id="timer">⏰ Zeit: 5:00</div>
      <div class="warning-text">Ihr habt 5 Minuten Zeit! Sammelt so viele Ideen wie möglich – auch verrückte!</div>
      
      <button class="secondary-btn" onclick="forceFinishTimer()">✅ Fertig</button>

      <button class="secondary-btn" onclick="getCreativityBooster()">✨ Kreativitäts-Booster holen</button>
      <div class="creativity-booster" id="creativity-booster"></div>

      <textarea id="neue-idee" placeholder="Gib hier deine Idee ein..." rows="3"></textarea>
      <button onclick="addIdee()">➕ Idee hinzufügen</button>

      <div class="ideas-list" id="ideas-display" style="display: none;">
        <h3>Deine Ideen:</h3>
        <div id="ideas-container"></div>
      </div>
    </section>

    <!-- Schritt 3 -->
    <section class="card step" id="step3">
      <h1>🛠️💻 Projektunterricht Ideenwerkzeug</h1>
      <div class="progress-bar"><div class="progress-fill" style="width: 100%"></div></div>

      <h2><span class="icon">🎯</span> Schritt 3: Ideenauswahl & KI-Prompt</h2>
      <div class="success-text">Großartig! Du hast <span id="total-ideas"></span> Ideen gesammelt!</div>
      <p><strong>Themenfeld:</strong> <span id="themenfeld-final"></span></p>
      <p><strong>Wähle bis zu 3 Ideen aus:</strong></p>

      <div class="ideas-list" id="final-ideas-list"></div>
      <button id="generate-btn" style="display: none;">🤖 KI-Prompt generieren</button>

      <div id="prompt-section" style="display: none;">
        <h3>Dein personalisierter KI-Prompt:</h3>
        <div class="prompt-box" id="generated-prompt"></div>
        <button onclick="copyPrompt()">📋 Prompt kopieren</button>
      </div>

      <button class="secondary-btn" onclick="restart()">🔄 Neues Themenfeld bearbeiten</button>
    </section>
  </main>

  <footer>
    <p>Erstellt von Louis Birk-von Brook • Lizenz:
      <a href="https://creativecommons.org/publicdomain/zero/1.0/deed.de">CC0</a>
    </p>
  </footer>

  <script>
    let currentStep = 1;
    let timerInterval;
    let timeLeft = 300;
    let ideas = [];
    let selectedIdeas = [];
    let themenfeld = '';

    const creativityBoosters = [
      "💭 Was würde Lisa Simpson jetzt machen?",
      "💰 Stell dir vor, du hättest unendlich viel Geld – was dann?",
      "🌍 Was wäre anders, wenn du das Projekt in Afrika oder Japan machst?",
      "🤖 Wie könnte dir ein Roboter helfen?",
      "👶 Was würde ein Kindergartenkind vorschlagen?",
      "🎮 Wie könntest du daraus ein Spiel machen?",
      "📱 Welches digitale Gerät könnte dir helfen?",
      "🌱 Wie könntest du die Umwelt dabei schützen?",
      "👥 Mit wem würdest du niemals zusammenarbeiten – aber vielleicht doch?",
      "⚡ Wie verrückt darf deine Idee sein?",
      "🔮 Wie sieht deine Idee in 10 Jahren aus?",
      "🏠 Wie könntest du direkt zu Hause loslegen?",
      "📺 Welche Fernsehserie bringt dich auf eine Idee?",
      "🌟 Was passiert, wenn du das Gegenteil von dem machst, was andere tun würden?",
      "🔗 Wie passen Computer und Umwelt bei deiner Idee zusammen?",
      "🎨 Was würde ein Künstler daraus machen?",
      "⚖️ Wie kann deine Idee anderen helfen, die weniger haben?",
      "🚀 Wenn alles möglich wäre – was würdest du erfinden?",
      "🌈 Wie können Kinder und Großeltern bei deiner Idee zusammenarbeiten?",
      "🎯 Was ist der kleinste erste Schritt?",
      "🪟 Was siehst du draußen – bringt dich das auf eine Idee?",
      "☕ Schau dich um – was liegt auf deinem Tisch?",
      "🎵 Stell dir vor, deine Idee wäre ein Lied – wie würde es klingen?",
      "👕 Welche Farbe hat dein T-Shirt? Welche Idee passt zu dieser Farbe?",
      "🌡️ Wie fühlt sich deine Idee bei Sonne, Regen oder Schnee an?",
      "🍎 Was hast du gegessen? Stell dir vor, das gehört zu deinem Projekt."
    ];

    function updateStartButton() {
      const input = document.getElementById('themenfeld');
      const btn = document.getElementById('start-btn');
      btn.disabled = !input.value.trim();
    }

    function startIdeensammlung() {
      const input = document.getElementById('themenfeld');
      themenfeld = input.value.trim();
      document.getElementById('themenfeld-display').textContent = themenfeld;
      showStep(2);
      startTimer();
    }

    function showStep(step) {
      document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
      document.getElementById(`step${step}`).classList.add('active');
      currentStep = step;
    }

    function startTimer() {
      const timerEl = document.getElementById('timer');
      timerInterval = setInterval(() => {
        timeLeft--;
        const min = Math.floor(timeLeft / 60);
        const sec = String(timeLeft % 60).padStart(2, '0');
        timerEl.textContent = `⏰ Zeit: ${min}:${sec}`;
        if (timeLeft <= 60) timerEl.classList.add('warning');
        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          finishIdeensammlung();
        }
      }, 1000);
    }

    function addIdee() {
      const input = document.getElementById('neue-idee');
      const val = input.value.trim();
      if (!val) return;
      ideas.push(val);
      input.value = '';
      updateIdeasDisplay();
    }

    function updateIdeasDisplay() {
      const list = document.getElementById('ideas-container');
      list.innerHTML = ideas.map((i, idx) =>
        `<div class="idea-item">${idx + 1}. ${i}</div>`
      ).join('');
      document.getElementById('ideas-display').style.display = 'block';
    }

    function getCreativityBooster() {
      const el = document.getElementById('creativity-booster');
      el.textContent = creativityBoosters[Math.floor(Math.random() * creativityBoosters.length)];
      el.classList.add('show');
    }

    function finishIdeensammlung() {
      showStep(3);
      document.getElementById('themenfeld-final').textContent = themenfeld;
      document.getElementById('total-ideas').textContent = ideas.length;
      const list = document.getElementById('final-ideas-list');
      list.innerHTML = ideas.map((i, idx) =>
        `<div class="idea-item" onclick="toggleIdea(${idx})" data-index="${idx}">
          <input type="checkbox" style="margin-right: 10px;">${i}</div>`
      ).join('');
    }

    function toggleIdea(index) {
      const item = document.querySelector(`[data-index="${index}"]`);
      const checkbox = item.querySelector('input[type="checkbox"]');
      if (selectedIdeas.includes(index)) {
        selectedIdeas = selectedIdeas.filter(i => i !== index);
        item.classList.remove('selected');
        checkbox.checked = false;
      } else if (selectedIdeas.length < 3) {
        selectedIdeas.push(index);
        item.classList.add('selected');
        checkbox.checked = true;
      } else {
        alert('Du kannst maximal 3 Ideen auswählen!');
      }
      document.getElementById('generate-btn').style.display = selectedIdeas.length > 0 ? 'inline-flex' : 'none';
    }

    function generatePrompt() {
      const selectedText = selectedIdeas.map(i => ideas[i]).join('\n- ');
      const prompt = `Hey! Schön, dass du da bist! 

Ich mache gerade ein spannendes Projekt mit Kindern zwischen 9 und 12 Jahren – vielleicht so alt wie du – und brauche deine Unterstützung beim Nachdenken.

Es geht darum, wie wir unsere Welt ein kleines Stück besser machen können. Du hast bestimmt schon von wichtigen Themen wie Umweltschutz, Gerechtigkeit oder guter Bildung für alle gehört – das sind Teile der 17 Ziele für eine nachhaltige Entwicklung (auch SDGs genannt). Und weißt du was? Kinder haben richtig gute Ideen, wie man diese Ziele erreichen kann!

Mein Thema ist: ${themenfeld} Dazu habe ich mir schon ein paar Ideen überlegt, die ich richtig spannend finde: ${selectedIdeasText} Jetzt frage ich mich: Welche dieser Ideen eignet sich am besten, um mit Kindern gemeinsam etwas zu bewegen? Ich suche eine Idee, die nicht nur spannend ist, sondern auch zeigt, wie man mit kleinen Schritten etwas Großes verändern kann – am besten mit digitalen Werkzeugen und ganz viel Kreativität!

Kannst du mir helfen, das herauszufinden? Aber bitte nicht mit einer Checkliste! Ich wünsche mir jemanden, der mit mir denkt, der neugierig fragt, und mir hilft, die besten Ideen zu entdecken – Schritt für Schritt.

Was denkst du – welche der drei Ideen klingt für dich am interessantesten? Und warum?´;
      
      document.getElementById('generated-prompt').textContent = prompt;
      document.getElementById('prompt-section').style.display = 'block';
    }

    function copyPrompt() {
      const prompt = document.getElementById('generated-prompt').textContent;
      navigator.clipboard.writeText(prompt).then(() => {
        alert('Prompt kopiert!');
      });
    }

    function restart() {
      ideas = [];
      selectedIdeas = [];
      themenfeld = '';
      timeLeft = 300;
      clearInterval(timerInterval);
      showStep(1);
      document.getElementById('themenfeld').value = '';
      document.getElementById('neue-idee').value = '';
      document.getElementById('creativity-booster').classList.remove('show');
      document.getElementById('ideas-display').style.display = 'none';
      document.getElementById('timer').classList.remove('warning');
    }
    
    function forceFinishTimer() {
  clearInterval(timerInterval);
  timeLeft = 0;
  finishIdeensammlung();
}

    // Tastatursteuerung
    document.getElementById('themenfeld').addEventListener('input', updateStartButton);
    document.getElementById('themenfeld').addEventListener('keypress', e => {
      if (e.key === 'Enter' && !document.getElementById('start-btn').disabled) startIdeensammlung();
    });
    document.getElementById('neue-idee').addEventListener('keypress', e => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        addIdee();
      }
    });

    window.addEventListener('load', updateStartButton);
    document.getElementById('start-btn').addEventListener('click', startIdeensammlung);
  </script>
</body>
</html>